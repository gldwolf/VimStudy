# 时序数据库

## 1 什么是时序数据库

> 时序数据库是基于时间的一系列的数据。在有时间的坐标中将这些数据点连成线，往过去看可以做成多纬度报表，提示其趋势性、规律性、异常性，往未来看可以做大数据分析，机器学习，实现预测和预警。

时序数据库就是存放时序数据的数据库，并且需要支持时序数据的快速写入、持久化、多纬度的聚合查询等基本功能。

对比传统数据库仅仅记录了数据的当前值，时序数据库则记录了所有的历史数据。同时时序数据的查询也会带上时间作为过滤条件。

![](static\时序数据1.jpg)

## 2 时序数据库的基本概念

**`metric`:** 指标（度量），相当于关系数据库中的 table

**`data point`:** 数据点，相当于关系型数据库中的 row

**`timestamp`:** 时间戳，代表数据点产生的时间

**`field`**: 度量下的不同字段。比如位置的这个度量具有经度和纬度这两个 field。一般情况下存放的是会随着时间戳变化而变化的数据。

**`tag`**: 标签，或者附加信息。一般存放的是并不随着时间戳变化的属性的信息。**timestamp 加上所有的 tags 可以认为是 table 的 primary key**。

如下图，度量为 Wind，每个数据点都具有一个 timestamp，两个 field: direction 和 speed，两个 tag: sensor, city。它的第一行和第三行，存放的都是 sensor 号码为 958D-7931 的设备，属性城市是上海。随着时间的变化，风向和风速发生了改变，风向从 23.4 变成 23.2，而风速则从 3.4 变成了 3.3。

![](static\时序数据2.jpg)

## 3 时序数据库的应用场景

所有时序数据产生，并且需要展现其历史趋势、周期规律、异常性的，进一步对未来做出预测分析的，都是时序数据库适合的场景。

## 4 时序数据库遇到的问题

时序数据库需要解决以下几个问题：

- 时序数据的写入：如何支持每秒钟上千万上亿条数据的写入
- 时序数据的读取：如何支持在秒级对上亿数据的分组聚合运算
- 成本敏感：由海量数据存储带来的是成本问题。如何更低成本存储这些数据，将成为时序数据库需要解决的重中之重

## 5 数据的存储

数据的存储可以分为两个问题：单节点存储和分布式存储。

单节点存储